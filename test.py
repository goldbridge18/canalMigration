import re
import json,os,sys

str01 = '''a:2:{s:2:"in";a:5:{i:0;s:10:"1464070293";i:1;s:10:"1464070611";i:2;s:10:"1464070950";i:3;s:10:"1464071656";i:4;s:10:"1464072082";}s:3:"out";a:5:{i:0;s:10:"1464070559";i:1;s:10:"1464070945";i:2;s:10:"1464071402";i:3;s:10:"1464072077";i:4;s:10:"1464072532";}}'''
str02 = '{"title":{"img":"20180301\/507c286d7cff01c69792.png","name":"title","color":"#2F2F35","alpha":0.3},"seat":{"img":"","name":"seat","color":"#2F2F35","alpha":0},"background":{"img":"","name":"background","color":"#2E3037","alpha":1},"outBackground":{"img":"","name":"outBackground","color":"#000000","alpha":1},"recordCountdown":{"duration":600},"recordBitRatePlus":false,"echoCancellationDisabled":false,"headimageToolbar":{"teacher":{"ResetAll":true,"MuteAll":true,"DownStageAll":false,"AllStudentsToFreeRegion":true,"ReplaceAll":false,"RewardAll":true,"AuthorityAll":false},"student":{"authority":true,"Mute":true,"reward":true,"Stage":true}},"commentWindow":{"CommentVisible":true},"clouddisk":{"teacherDefaultTab":"AuthorizedResources","limitStudentsCloseCourseWare":false},"classroomWindow":{"student":{"FrontLock":false,"ScreenMark":false},"teacher":{"ExtendClassTime":false,"CameraMirroring":false,"LockBlackboardElement":false,"Win7AeroThemeRecording":false,"MoveStudentOut":true}},"help":{"studentsShow":false},"chatWindow":{"QuestionVisible":true,"EnableSnapshot":true,"MinTimespan":0},"screenShare":{"studentsControlTeacher":false,"ScreenShareMemberLimit":35},"handsupWindow":{"visible":true},"blackboard":{"limitStudentsScroll":false},"dropBlackboardAuthority":false,"dropBackStageCancelAuthority":false,"SmallBlackboardMemberLimit":35,"boardToolbar":{"teacher":{"MiniToolbox":true,"MiniTools":[]},"student":{"Roster":true}}}'
str03 = '''a:5:{s:2:"in";a:2:{i:0;s:10:"1594891562";i:1;s:10:"1594891975";}s:13:"platform_type";a:2:{i:0;i:301;i:1;i:301;}s:7:"os_type";a:2:{i:0;i:4;i:1;i:4;}s:3:"out";a:2:{i:0;s:10:"1594891676";i:1;s:10:"1594892246";}s:11:"exit_status";a:2:{i:0;s:2:"56";i:1;s:3:"111";}}'''
str04 = '''a:2:{s:2:"in";a:1:{i:0;s:10:"1467868772";}s:3:"out";a:1:{i:0;s:10:"1467869025";}}'''
str112 = 'a:3:{s:3:"out";a:2:{i:0;s:10:"1474376929";i:1;s:10:"1474377337";}s:11:"exit_status";a:2:{i:0;s:1:"1";i:1;s:1:"1";}s:2:"in";a:1:{i:0;s:10:"1474376933";}}'
str05 = 'a:3:{s:2:"in";a:2:{i:0;s:10:"1501134167";i:1;s:10:"1501140558";}s:3:"out";a:1:{i:0;s:10:"1501141533";}s:11:"exit_status";a:1:{i:0;s:1:"1";}}'

# from handleserivce.handleJson import jsonToList
# from handleserivce.handleJson import jsonToList
# str11 = '{["uid":"1000082","isInClass":1,"platformType":2]}'
# print(re.sub('\]$',"",re.sub('^\[?',"",str11)))


tablelist = ['class_id']
for i in tablelist:
    print("            try:")
    print("             {name} = valDict[\"{name}\"]".format(name=i))
    print("            except KeyError as e:")
    print("            	{name} = \"0\"".format(name=i))



from common.common import getBinlogValues
str12 ={'db': 'eo_os', 'table': 'eeo_school_auth_info', 'event_type': 2, 'data': {'before': {'school_auth_info_id': '1335', 'school_uid': '2388352', 'school_introduce': '<p>放大</p>', 'class_skin_id': '1', 'del_pic_month': '3', 'del_video_month': '3', 'open_cloud_disk': '0', 'push_class_report': '1', 'balance_remind': '1', 'class_remind': '1', 'balance_remind_info': '[{"money":50000,"telephone":[15810913872]},{"money":200000,"telephone":[15810913872]}]', 'class_remind_info': '{"student":{"day":"111","hour":"211","minute":"321"},"teacher":{"day":"111","hour":"211","minute":"321"}}', 'auto_del_video': '1', 'auto_del_pic': '0', 'student_num': '100', 'stage_num': '13', 'audit_num': '20', 'sub_num': '100', 'class_num': '200', 'super_custom_service': '1', 'hidden_mob': '0', 'notify_mail': '', 'class_report_info': '{"configList":[{"configId":0,"configName":"studyReportTemplate1","layoutSort":["topUserAvatarBox","topUserInfoBox","teacherCommentsBox","lessonIntroBox","studentAchievementBox","studentActivityDegreeBox","studentAttendanceBox","studentLessonNoteBox","teacherLessonNoteBox","assistantLessonNoteBox","lessonMomentsBox","schoolIntroBox"],"visibleConfig":{"schoolBrand":true,"lessonName":true,"teacherComments":true,"teacherCommentsTranslate":true,"lessonIntro":true,"studentAchievement":true,"studentRewardRanking":true,"singleStudentRewardRanking":true,"studentLessonAnswerAccuracy":true,"studentActivityDegree":true,"studentActivityDegreeRanking":true,"studentActivityDegreeOnStageTimes":true,"studentActivityDegreeOnSpeakTimes":true,"studentActivityDegreeOnControlTimes":true,"studentAttendance":true,"studentLessonAttendance":true,"studentAttendNum":true,"studentLateNum":true,"studentQuitEarly":true,"studentLessonNote":true,"teacherLessonNote":true,"assistantLessonNote":true,"lessonVideo":true,"lessonMoments":true,"schoolIntro":true}},{"configId":1,"configName":"studyReportTemplate2","layoutSort":["topUserAvatarBox","topUserInfoBox","teacherCommentsBox","lessonIntroBox","studentAchievementBox","studentAnswerAccuracyBox","studentActivityDegreeBox","studentAttendanceBox","studentLessonNoteBox","teacherLessonNoteBox","assistantLessonNoteBox","lessonMomentsBox","schoolIntroBox"],"visibleConfig":{"schoolBrand":true,"lessonName":true,"teacherComments":true,"teacherCommentsTranslate":true,"lessonIntro":true,"studentAchievement":true,"studentRewardRanking":true,"singleStudentRewardRanking":true,"studentLessonAnswerAccuracy":true,"studentActivityDegree":true,"studentActivityDegreeRanking":true,"studentActivityDegreeOnStageTimes":true,"studentActivityDegreeOnSpeakTimes":true,"studentActivityDegreeOnControlTimes":true,"studentAttendance":true,"studentLessonAttendance":true,"studentAttendNum":true,"studentLateNum":true,"studentQuitEarly":true,"studentLessonNote":true,"teacherLessonNote":true,"assistantLessonNote":true,"lessonVideo":false,"lessonMoments":true,"schoolIntro":true}}],"configUse":0}', 'guide_step': '0', 'cloud_free_volume': '', 'cloud_folder_toplimit': '2000', 'classroom_set_num': '10', 'hd_legibility': '1', 'login_no_checking': '0', 'double_teacher_course': '0', 'sole_supervise_class_page': '0', 'authorize_between_school': '1', 'add_course_student_replay': '0', 'delete_course_student_replay': '0', 'repaly_view_power': '0', 'avoid_record_replay': '1', 'set_as_cluster_nickname': '1', 'live_reservation': '20200703/013e1a65a7ba02257709.jpg', 'live_default_cover': '{"live1":{"radioValue":1,"customizeTips":{"zh-CN":"世界很大，我想去看看","en":"但是房贷算房贷房贷算发第三方神大夫"}},"live2":{"radioValue":1,"customizeTips":{"zh-CN":"老师开小差啦，同学们可以回忆一下课堂内容，马上回来！","en":"不要着急"}},"live3":{"radioValue":1,"customizeTips":{"zh-CN":"","en":""}}}', 'customize_live_prompt': '20200703/7f855a8707bfd2138313.png', 'default_course_cover': ''}, 'after': {'school_auth_info_id': '1335', 'school_uid': '2388352', 'school_introduce': '<p>放大</p>', 'class_skin_id': '2019', 'del_pic_month': '3', 'del_video_month': '3', 'open_cloud_disk': '0', 'push_class_report': '1', 'balance_remind': '1', 'class_remind': '1', 'balance_remind_info': '[{"money":50000,"telephone":[15810913872]},{"money":200000,"telephone":[15810913872]}]', 'class_remind_info': '{"student":{"day":"111","hour":"211","minute":"321"},"teacher":{"day":"111","hour":"211","minute":"321"}}', 'auto_del_video': '1', 'auto_del_pic': '0', 'student_num': '100', 'stage_num': '13', 'audit_num': '20', 'sub_num': '100', 'class_num': '200', 'super_custom_service': '1', 'hidden_mob': '0', 'notify_mail': '', 'class_report_info': '{"configList":[{"configId":0,"configName":"studyReportTemplate1","layoutSort":["topUserAvatarBox","topUserInfoBox","teacherCommentsBox","lessonIntroBox","studentAchievementBox","studentActivityDegreeBox","studentAttendanceBox","studentLessonNoteBox","teacherLessonNoteBox","assistantLessonNoteBox","lessonMomentsBox","schoolIntroBox"],"visibleConfig":{"schoolBrand":true,"lessonName":true,"teacherComments":true,"teacherCommentsTranslate":true,"lessonIntro":true,"studentAchievement":true,"studentRewardRanking":true,"singleStudentRewardRanking":true,"studentLessonAnswerAccuracy":true,"studentActivityDegree":true,"studentActivityDegreeRanking":true,"studentActivityDegreeOnStageTimes":true,"studentActivityDegreeOnSpeakTimes":true,"studentActivityDegreeOnControlTimes":true,"studentAttendance":true,"studentLessonAttendance":true,"studentAttendNum":true,"studentLateNum":true,"studentQuitEarly":true,"studentLessonNote":true,"teacherLessonNote":true,"assistantLessonNote":true,"lessonVideo":true,"lessonMoments":true,"schoolIntro":true}},{"configId":1,"configName":"studyReportTemplate2","layoutSort":["topUserAvatarBox","topUserInfoBox","teacherCommentsBox","lessonIntroBox","studentAchievementBox","studentAnswerAccuracyBox","studentActivityDegreeBox","studentAttendanceBox","studentLessonNoteBox","teacherLessonNoteBox","assistantLessonNoteBox","lessonMomentsBox","schoolIntroBox"],"visibleConfig":{"schoolBrand":true,"lessonName":true,"teacherComments":true,"teacherCommentsTranslate":true,"lessonIntro":true,"studentAchievement":true,"studentRewardRanking":true,"singleStudentRewardRanking":true,"studentLessonAnswerAccuracy":true,"studentActivityDegree":true,"studentActivityDegreeRanking":true,"studentActivityDegreeOnStageTimes":true,"studentActivityDegreeOnSpeakTimes":true,"studentActivityDegreeOnControlTimes":true,"studentAttendance":true,"studentLessonAttendance":true,"studentAttendNum":true,"studentLateNum":true,"studentQuitEarly":true,"studentLessonNote":true,"teacherLessonNote":true,"assistantLessonNote":true,"lessonVideo":false,"lessonMoments":true,"schoolIntro":true}}],"configUse":0}', 'guide_step': '0', 'cloud_free_volume': '', 'cloud_folder_toplimit': '2000', 'classroom_set_num': '10', 'hd_legibility': '1', 'login_no_checking': '0', 'double_teacher_course': '0', 'sole_supervise_class_page': '0', 'authorize_between_school': '1', 'add_course_student_replay': '0', 'delete_course_student_replay': '0', 'repaly_view_power': '0', 'avoid_record_replay': '1', 'set_as_cluster_nickname': '1', 'live_reservation': '20200703/013e1a65a7ba02257709.jpg', 'live_default_cover': '{"live1":{"radioValue":1,"customizeTips":{"zh-CN":"世界很大，我想去看看","en":"但是房贷算房贷房贷算发第三方神大夫"}},"live2":{"radioValue":1,"customizeTips":{"zh-CN":"老师开小差啦，同学们可以回忆一下课堂内容，马上回来！","en":"不要着急"}},"live3":{"radioValue":1,"customizeTips":{"zh-CN":"","en":""}}}', 'customize_live_prompt': '20200703/7f855a8707bfd2138313.png', 'default_course_cover': ''}}, 'updated_fields': {'school_auth_info_id': False, 'school_uid': False, 'school_introduce': False, 'class_skin_id': True, 'del_pic_month': False, 'del_video_month': False, 'open_cloud_disk': False, 'push_class_report': False, 'balance_remind': False, 'class_remind': False, 'balance_remind_info': False, 'class_remind_info': False, 'auto_del_video': False, 'auto_del_pic': False, 'student_num': False, 'stage_num': False, 'audit_num': False, 'sub_num': False, 'class_num': False, 'super_custom_service': False, 'hidden_mob': False, 'notify_mail': False, 'class_report_info': False, 'guide_step': False, 'cloud_free_volume': False, 'cloud_folder_toplimit': False, 'classroom_set_num': False, 'hd_legibility': False, 'login_no_checking': False, 'double_teacher_course': False, 'sole_supervise_class_page': False, 'authorize_between_school': False, 'add_course_student_replay': False, 'delete_course_student_replay': False, 'repaly_view_power': False, 'avoid_record_replay': False, 'set_as_cluster_nickname': False, 'live_reservation': False, 'live_default_cover': False, 'customize_live_prompt': False, 'default_course_cover': False}, 'execute_time': 1597135538}

print(getBinlogValues(str12))
print(dict(zip(getBinlogValues(str12)[0],getBinlogValues(str12)[1])))